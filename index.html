<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NHM ROI Calculator</title>
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script>
      tailwind = window.tailwind || {};
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: {
              sans: ['"Manrope"', "ui-sans-serif", "system-ui", "-apple-system", "BlinkMacSystemFont", "sans-serif"],
            },
            colors: {
              nhm: {
                navy: "#0d1b2a",
                slate: "#1b263b",
                light: "#f1f3f5",
                softer: "#f8f9fa",
                accent: "#fca311",
              },
            },
            boxShadow: {
              dashboard: "0 20px 45px -20px rgba(13,27,42,0.35)",
            },
            borderRadius: {
              card: "24px",
              button: "18px",
            },
          },
        },
      };
      window.tailwind = tailwind;
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/framer-motion@10.16.4/dist/framer-motion.umd.min.js"></script>
  </head>
  <body class="antialiased bg-nhm-light text-slate-900 transition-colors duration-300 dark:bg-[#0b1729] dark:text-slate-100">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useMemo } = React;
      const { motion, AnimatePresence } = window.framerMotion;

      const navItems = ["Home", "Solutions", "Success", "Pricing", "Account"];

      const formatter = new Intl.NumberFormat("en-GB", {
        style: "currency",
        currency: "GBP",
        maximumFractionDigits: 0,
      });

      const formatNumber = (value) => {
        if (value === null || value === undefined || Number.isNaN(value)) return "–";
        if (!Number.isFinite(value)) return "–";
        return formatter.format(value);
      };

      function InfoStat({ label, value, highlight }) {
        return (
          <div className="flex flex-col gap-1 rounded-card bg-white/80 p-4 text-left shadow-md shadow-black/5 ring-1 ring-white/60 backdrop-blur dark:bg-[#152133]/80 dark:text-slate-100 dark:shadow-black/30">
            <p className="text-xs font-semibold uppercase tracking-[0.18em] text-slate-500 dark:text-slate-300">{label}</p>
            <p className={`text-2xl font-semibold ${highlight ? "text-nhm-accent" : "text-nhm-navy dark:text-white"}`}>
              {value}
            </p>
          </div>
        );
      }

      function App() {
        const [inputs, setInputs] = useState({
          investment: "",
          savings: "",
          years: "3",
        });
        const [results, setResults] = useState(null);
        const [darkMode, setDarkMode] = useState(false);

        useEffect(() => {
          const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
          setDarkMode(prefersDark);
        }, []);

        useEffect(() => {
          const root = document.documentElement;
          if (darkMode) {
            root.classList.add("dark");
          } else {
            root.classList.remove("dark");
          }
        }, [darkMode]);

        const handleInputChange = (event) => {
          const { name, value } = event.target;
          setInputs((prev) => ({ ...prev, [name]: value }));
        };

        const handleCalculate = (event) => {
          event.preventDefault();
          const investment = parseFloat(inputs.investment);
          const annualSavings = parseFloat(inputs.savings);
          const years = parseFloat(inputs.years);

          if (!investment || investment <= 0 || !annualSavings || annualSavings <= 0 || !years || years <= 0) {
            setResults({ error: "Please provide positive values for all fields." });
            return;
          }

          const totalSavings = annualSavings * years;
          const profit = totalSavings - investment;
          const roi = investment > 0 ? (profit / investment) * 100 : 0;
          const payback = annualSavings > 0 ? investment / annualSavings : null;

          setResults({
            error: null,
            roi,
            payback,
            profit,
            totalSavings,
          });
        };

        const resetForm = () => {
          setInputs({ investment: "", savings: "", years: "3" });
          setResults(null);
        };

        const summaryCopy = useMemo(() => {
          if (!results || results.error) return "Discover your return on investment in moments with NHM's ROI calculator.";
          const roiValue = results.roi.toFixed(1);
          const paybackValue = results.payback;
          if (!Number.isFinite(paybackValue)) {
            return `Your projected ROI is ${roiValue}% over ${inputs.years} years.`;
          }
          return `Projected ROI of ${roiValue}% with a payback period of ${paybackValue.toFixed(1)} years.`;
        }, [results, inputs.years]);

        return (
          <div className="flex min-h-screen flex-col bg-transparent text-base text-slate-900 transition-colors duration-500 dark:text-slate-100 lg:flex-row">
            <aside className="flex w-full flex-col gap-10 bg-nhm-navy px-6 py-10 text-white shadow-dashboard lg:w-72">
              <div className="flex items-center gap-3">
                <div className="flex h-12 w-12 items-center justify-center rounded-2xl bg-white/10 text-2xl font-bold shadow-inner">
                  NHM
                </div>
                <div>
                  <p className="text-sm uppercase tracking-[0.35em] text-white/60">Navigator</p>
                  <h1 className="text-2xl font-semibold tracking-tight">Dashboard</h1>
                </div>
              </div>
              <nav className="flex flex-wrap gap-2 text-sm font-medium lg:flex-col">
                {navItems.map((item) => (
                  <a
                    key={item}
                    href="#"
                    className="rounded-button px-4 py-2 transition-colors duration-300 hover:bg-white/10 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"
                  >
                    {item}
                  </a>
                ))}
              </nav>
              <p className="mt-auto hidden text-sm text-white/60 lg:block">
                Designed for NHM teams to evaluate ROI with clarity and confidence.
              </p>
            </aside>

            <main className="flex flex-1 flex-col gap-8 bg-nhm-softer px-6 py-8 transition-colors duration-500 dark:bg-[#111c2c] sm:px-10">
              <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
                <div>
                  <p className="text-xs font-semibold uppercase tracking-[0.3em] text-nhm-navy/70 dark:text-white/60">NHM Analytics</p>
                  <h2 className="mt-2 text-3xl font-semibold text-nhm-navy dark:text-white">ROI Calculator</h2>
                  <p className="mt-2 max-w-2xl text-sm text-slate-600 dark:text-slate-300">{summaryCopy}</p>
                </div>
                <div className="flex items-center gap-3 self-start rounded-button bg-white/80 px-4 py-2 shadow-inner shadow-black/10 ring-1 ring-white/70 transition dark:bg-[#152133]/80 dark:shadow-black/40 dark:ring-white/10">
                  <span className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500 dark:text-slate-200">Dark Mode</span>
                  <button
                    type="button"
                    onClick={() => setDarkMode((prev) => !prev)}
                    className={`relative h-8 w-16 rounded-full border-2 border-transparent bg-slate-300 transition dark:bg-slate-600 ${
                      darkMode ? "bg-nhm-accent" : ""
                    }`}
                  >
                    <span
                      className={`absolute top-1/2 h-6 w-6 -translate-y-1/2 rounded-full bg-white shadow-md transition-all duration-300 ${
                        darkMode ? "right-1" : "left-1"
                      }`}
                    ></span>
                  </button>
                </div>
              </div>

              <form
                onSubmit={handleCalculate}
                className="grid w-full gap-6 rounded-card bg-white/90 p-6 shadow-dashboard ring-1 ring-white/60 backdrop-blur-lg transition dark:bg-[#152133]/80 dark:ring-white/10"
              >
                <div className="grid gap-6 md:grid-cols-3">
                  <label className="flex flex-col gap-3 text-sm font-medium text-slate-700 dark:text-slate-200">
                    Investment Cost (£)
                    <input
                      type="number"
                      name="investment"
                      min="0"
                      step="0.01"
                      inputMode="decimal"
                      placeholder="e.g. 25000"
                      value={inputs.investment}
                      onChange={handleInputChange}
                      className="rounded-button border border-slate-200/70 bg-white px-4 py-3 text-base font-semibold text-nhm-navy shadow-sm shadow-black/5 outline-none transition focus:border-nhm-accent focus:ring-2 focus:ring-nhm-accent/40 dark:border-white/10 dark:bg-[#1c2940] dark:text-white"
                    />
                  </label>

                  <label className="flex flex-col gap-3 text-sm font-medium text-slate-700 dark:text-slate-200">
                    Annual Savings (£)
                    <input
                      type="number"
                      name="savings"
                      min="0"
                      step="0.01"
                      inputMode="decimal"
                      placeholder="e.g. 18000"
                      value={inputs.savings}
                      onChange={handleInputChange}
                      className="rounded-button border border-slate-200/70 bg-white px-4 py-3 text-base font-semibold text-nhm-navy shadow-sm shadow-black/5 outline-none transition focus:border-nhm-accent focus:ring-2 focus:ring-nhm-accent/40 dark:border-white/10 dark:bg-[#1c2940] dark:text-white"
                    />
                  </label>

                  <label className="flex flex-col gap-3 text-sm font-medium text-slate-700 dark:text-slate-200">
                    Time Period (Years)
                    <input
                      type="number"
                      name="years"
                      min="1"
                      step="0.5"
                      inputMode="decimal"
                      placeholder="e.g. 3"
                      value={inputs.years}
                      onChange={handleInputChange}
                      className="rounded-button border border-slate-200/70 bg-white px-4 py-3 text-base font-semibold text-nhm-navy shadow-sm shadow-black/5 outline-none transition focus:border-nhm-accent focus:ring-2 focus:ring-nhm-accent/40 dark:border-white/10 dark:bg-[#1c2940] dark:text-white"
                    />
                  </label>
                </div>

                <div className="flex flex-wrap items-center justify-between gap-4">
                  <div className="flex flex-wrap gap-3 text-xs font-medium uppercase tracking-[0.25em] text-slate-500 dark:text-slate-300">
                    <span>Real-time Insights</span>
                    <span className="hidden md:inline">•</span>
                    <span>Enterprise Ready</span>
                    <span className="hidden md:inline">•</span>
                    <span>NHM Certified</span>
                  </div>
                  <div className="flex gap-3">
                    <button
                      type="button"
                      onClick={resetForm}
                      className="rounded-button border border-transparent bg-slate-200/80 px-5 py-3 text-sm font-semibold uppercase tracking-widest text-nhm-navy shadow-sm shadow-black/10 transition hover:bg-slate-300/80 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-nhm-accent dark:bg-white/10 dark:text-white dark:hover:bg-white/20"
                    >
                      Reset
                    </button>
                    <button
                      type="submit"
                      className="rounded-button bg-nhm-accent px-6 py-3 text-sm font-semibold uppercase tracking-widest text-nhm-navy shadow-lg shadow-nhm-accent/40 transition hover:brightness-110 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-nhm-accent"
                    >
                      Calculate ROI
                    </button>
                  </div>
                </div>

                <AnimatePresence mode="wait">
                  {results && (
                    <motion.div
                      key={results.error ? "error" : "results"}
                      initial={{ opacity: 0, y: 20 }}
                      animate={{ opacity: 1, y: 0 }}
                      exit={{ opacity: 0, y: -10 }}
                      transition={{ duration: 0.35, ease: "easeOut" }}
                      className="grid gap-4 rounded-card bg-gradient-to-br from-white via-white/95 to-nhm-softer/60 p-6 shadow-inner shadow-black/5 ring-1 ring-white/60 dark:from-[#19253b] dark:via-[#1b2740] dark:to-[#152133] dark:ring-white/5"
                    >
                      {results.error ? (
                        <p className="text-sm font-semibold text-rose-500">{results.error}</p>
                      ) : (
                        <div className="grid gap-4 lg:grid-cols-4">
                          <InfoStat label="ROI" value={`${results.roi.toFixed(1)}%`} highlight />
                          <InfoStat
                            label="Payback Period"
                            value={Number.isFinite(results.payback) ? `${results.payback.toFixed(1)} years` : "–"}
                          />
                          <InfoStat label="Total Profit" value={formatNumber(results.profit)} />
                          <InfoStat label="Total Savings" value={formatNumber(results.totalSavings)} />
                        </div>
                      )}
                    </motion.div>
                  )}
                </AnimatePresence>
              </form>

              <section className="grid gap-4 rounded-card bg-white/80 p-6 text-sm text-slate-600 shadow-dashboard ring-1 ring-white/70 backdrop-blur-sm dark:bg-[#152133]/80 dark:text-slate-300 dark:ring-white/5 md:grid-cols-2">
                <div className="space-y-3">
                  <h3 className="text-lg font-semibold text-nhm-navy dark:text-white">Why calculate ROI?</h3>
                  <p>
                    Align investment strategies with measurable outcomes. NHM’s calculator surfaces payback clarity and helps teams
                    prioritise initiatives that deliver both operational efficiency and financial impact.
                  </p>
                  <p>
                    Share these insights across stakeholders to accelerate approvals and capture business cases with confidence.
                  </p>
                </div>
                <div className="space-y-3 rounded-card bg-gradient-to-br from-nhm-navy via-[#132035] to-[#1b263b] p-6 text-white shadow-inner shadow-black/40">
                  <h3 className="text-lg font-semibold">Pro Tips</h3>
                  <ul className="space-y-2 text-sm text-white/80">
                    <li className="flex items-start gap-2">
                      <span className="mt-1 inline-flex h-2 w-2 rounded-full bg-nhm-accent"></span>
                      Model both conservative and ambitious savings assumptions to stress-test returns.
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="mt-1 inline-flex h-2 w-2 rounded-full bg-nhm-accent"></span>
                      Revisit payback calculations quarterly to ensure programmes remain on track.
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="mt-1 inline-flex h-2 w-2 rounded-full bg-nhm-accent"></span>
                      Integrate ROI outputs into NHM dashboards for richer executive reporting.
                    </li>
                  </ul>
                </div>
              </section>
            </main>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
